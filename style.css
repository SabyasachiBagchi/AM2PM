:root {
  /* Color Palette (Light Mode) */
  --color-background: #f4f7f6;
  --color-surface: #ffffff;
  --color-primary: #007bff;
  --color-primary-hover: #0056b3;
  --color-text-primary: #212529;
  --color-text-secondary: #6c757d;
  --color-border: #dee2e6;
  --color-shadow: rgba(0, 0, 0, 0.1);
  --color-danger: #dc3545;
  --color-lunch: #ffc107; /* Yellow */
  --color-dinner: #17a2b8; /* Teal */

  /* Spacing & Sizing */
  --space-4: 4px; --space-8: 8px; --space-12: 12px; --space-16: 16px; --space-24: 24px;
  --font-size-sm: 0.875rem; --font-size-md: 1rem; --font-size-lg: 1.25rem;
  --radius-sm: 4px; --radius-md: 8px; --radius-lg: 16px;
  --transition-speed: 0.3s;
}

body.dark-mode {
  /* Color Palette (Dark Mode) */
  --color-background: #121212;
  --color-surface: #1e1e1e;
  --color-primary: #0d6efd;
  --color-primary-hover: #3d8bfd;
  --color-text-primary: #e9ecef;
  --color-text-secondary: #adb5bd;
  --color-border: #495057;
  --color-shadow: rgba(0, 0, 0, 0.25);
}

/* Base Styles */
* { box-sizing: border-box; }
body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: var(--color-background); color: var(--color-text-primary); transition: background-color var(--transition-speed), color var(--transition-speed); }
.hidden { display: none !important; }

/* Particle.js Background */
#particles-js { position: fixed; width: 100%; height: 100%; top: 0; left: 0; z-index: -1; }

/* Views & Layout */
.modal { display: flex; position: fixed; inset: 0; justify-content: center; align-items: center; background-color: rgba(0,0,0,0.5); backdrop-filter: blur(5px); z-index: 100; }
.modal-content { background: var(--color-surface); padding: var(--space-24); border-radius: var(--radius-lg); box-shadow: 0 10px 30px var(--color-shadow); width: 90%; max-width: 400px; border: 1px solid var(--color-border); }
.app { min-height: 100vh; }
.main-content { padding: var(--space-24); max-width: 1400px; margin: auto; width: 100%; }
.view { animation: fadeIn 0.5s ease; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* Navbar */
.navbar { background: var(--color-surface); border-bottom: 1px solid var(--color-border); padding: var(--space-12) var(--space-24); position: sticky; top: 0; z-index: 50; }
.navbar-content { display: flex; justify-content: space-between; align-items: center; max-width: 1400px; margin: auto; }
.navbar-brand { display: flex; align-items: center; gap: var(--space-8); font-weight: 600; }
.navbar-controls { display: flex; align-items: center; gap: var(--space-16); }
.realtime-clock { text-align: center; }
#clock-time { font-weight: 600; }
#clock-date { font-size: var(--font-size-sm); color: var(--color-text-secondary); }
.theme-switcher { display: flex; align-items: center; }
.theme-toggle-label { display: flex; align-items: center; cursor: pointer; gap: var(--space-8); color: var(--color-text-secondary); }
.theme-toggle-checkbox { display: none; }
.theme-toggle-switch { position: relative; width: 40px; height: 22px; background: var(--color-border); border-radius: 11px; transition: background-color var(--transition-speed); }
.theme-toggle-switch::before { content: ''; position: absolute; width: 18px; height: 18px; left: 2px; top: 2px; background: white; border-radius: 50%; transition: transform var(--transition-speed); }
.theme-toggle-checkbox:checked + .theme-toggle-switch { background: var(--color-primary); }
.theme-toggle-checkbox:checked + .theme-toggle-switch::before { transform: translateX(18px); }
.fab-menu-item { color: var(--color-text-primary); }

/* Headers, Stats Grid, Calendar, Day Detail, Payment View, FAB, and General Components... */
.dashboard-header, .day-detail-header, .payment-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-24); }
.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--space-16); margin-bottom: var(--space-24); }
.stat-card { background: var(--color-surface); padding: var(--space-16); border-radius: var(--radius-md); border: 1px solid var(--color-border); display: flex; align-items: center; gap: var(--space-16); }
.stat-icon { font-size: 1.5rem; color: var(--color-primary); }
.stat-content h3 { margin: 0; font-size: var(--font-size-lg); }
.stat-content p { margin: 0; color: var(--color-text-secondary); }
.calendar-section { background: var(--color-surface); padding: var(--space-16); border-radius: var(--radius-md); border: 1px solid var(--color-border); }
.calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: var(--space-8); }
.calendar-day-header { text-align: center; font-weight: 600; color: var(--color-text-secondary); padding-bottom: var(--space-8); font-size: var(--font-size-sm); }
.day-cell { aspect-ratio: 1; padding: var(--space-8); border-radius: var(--radius-md); background: var(--color-surface); border: 1px solid var(--color-border); cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; display: flex; flex-direction: column; justify-content: space-between; }
.day-cell:not(.empty):hover { transform: translateY(-4px); box-shadow: 0 4px 12px var(--color-shadow); }
.day-cell.empty { background: transparent; border: none; cursor: default; }
.day-cell .day-number { font-weight: 500; }
.day-cell.today .day-number { background-color: var(--color-primary); color: white; border-radius: 50%; width: 1.5em; height: 1.5em; display: inline-flex; align-items: center; justify-content: center; }
.meal-dots { display: flex; gap: var(--space-4); margin-top: var(--space-4); height: 8px; }
.meal-dot { width: 8px; height: 8px; border-radius: 50%; }
.meal-dot.lunch { background-color: var(--color-lunch); }
.meal-dot.dinner { background-color: var(--color-dinner); }
.meal-cards { display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-16); margin-bottom: var(--space-16); }
.meal-card, .summary-card { background: var(--color-surface); padding: var(--space-16); border-radius: var(--radius-md); border: 1px solid var(--color-border); }
.meal-header { display: flex; justify-content: space-between; align-items: center; }
.meal-toggle { display: flex; align-items: center; gap: var(--space-12); margin-top: var(--space-16); }
.toggle-switch { position: relative; display: inline-block; width: 50px; height: 28px; }
.toggle-switch input { opacity: 0; width: 0; height: 0; }
.toggle-slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--color-border); transition: var(--transition-speed); border-radius: 28px; }
.toggle-slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: var(--transition-speed); border-radius: 50%; }
input:checked + .toggle-slider { background-color: var(--color-primary); }
input:checked + .toggle-slider:before { transform: translateX(22px); }
.toggle-label { font-weight: 500; color: var(--color-text-secondary); }
.payment-form-card { background: var(--color-surface); padding: var(--space-16); border-radius: var(--radius-md); border: 1px solid var(--color-border); margin-bottom: var(--space-16); }
.payment-history { background: var(--color-surface); padding: var(--space-16); border-radius: var(--radius-md); border: 1px solid var(--color-border); }
.payment-item { display: flex; justify-content: space-between; align-items: center; padding: var(--space-8) 0; border-bottom: 1px solid var(--color-border); }
.payment-item:last-child { border: none; }
.payment-actions { display: flex; gap: var(--space-8); }
.fab { position: fixed; bottom: var(--space-24); right: var(--space-24); z-index: 40; }
.fab-button { width: 56px; height: 56px; border-radius: 50%; background: var(--color-primary); color: white; border: none; font-size: 1.5rem; cursor: pointer; box-shadow: 0 4px 12px var(--color-shadow); }
.fab-menu { position: absolute; bottom: 64px; right: 0; display: flex; flex-direction: column; gap: var(--space-8); }
.fab-menu-item { display: flex; align-items: center; gap: var(--space-8); background: var(--color-surface); padding: var(--space-8) var(--space-16); border-radius: var(--radius-md); box-shadow: 0 2px 8px var(--color-shadow); cursor: pointer; border: 1px solid var(--color-border); }
.btn { padding: var(--space-8) var(--space-16); border-radius: var(--radius-md); border: 1px solid transparent; font-weight: 600; cursor: pointer; transition: all var(--transition-speed); }
.btn--primary { background: var(--color-primary); color: white; }
.btn--primary:hover { background: var(--color-primary-hover); }
.btn--outline { background: transparent; border-color: var(--color-border); color: var(--color-text-primary); }
.btn--outline:hover { border-color: var(--color-primary); color: var(--color-primary); }
.btn--icon { background: transparent; border: none; color: var(--color-text-secondary); cursor: pointer; }
.btn--icon:hover { color: var(--color-primary); }
.form-control { width: 100%; padding: var(--space-8); border-radius: var(--radius-md); border: 1px solid var(--color-border); background: var(--color-background); color: var(--color-text-primary); }
.form-group { margin-bottom: var(--space-16); }
.login-error { color: var(--color-danger); margin-bottom: var(--space-16); font-size: var(--font-size-sm); text-align: center; }
